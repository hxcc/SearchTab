<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新标签页</title>
    <link rel="stylesheet" href="newtab.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
</head>
<body>
    <div class="background-image" id="backgroundImage"></div>
    
    <div class="container">
        <div class="top-bar">
            <div class="left-menu">
                <button class="top-btn" id="bookmarksBtn">
                    <i class="fas fa-bookmark"></i> 书签
                </button>
                <button class="top-btn" id="historyBtn">
                    <i class="fas fa-history"></i> 历史记录
                </button>
            </div>
            <div class="right-menu">
                <div class="wallpaper-control">
                    <button class="wallpaper-btn" id="changeWallpaperBtn">
                        <i class="fas fa-image"></i> 更换壁纸
                    </button>
                    <input type="file" id="wallpaperUpload" accept="image/*" style="display: none;">
                    <div class="wallpaper-presets">
                        <button class="wallpaper-preset" data-img="https://images.unsplash.com/photo-1506744038136-46273834b3fb" title="山脉风景">
                            <i class="fas fa-mountain"></i>
                        </button>
                        <button class="wallpaper-preset" data-img="https://images.unsplash.com/photo-1519681393784-d120267933ba" title="星空">
                            <i class="fas fa-star"></i>
                        </button>
                        <button class="wallpaper-preset" data-img="https://images.unsplash.com/photo-1506905925346-21bda4d32df4" title="海滩">
                            <i class="fas fa-umbrella-beach"></i>
                        </button>
                        <button class="wallpaper-preset" data-img="https://images.unsplash.com/photo-1518837695005-2083093ee35b" title="城市夜景">
                            <i class="fas fa-city"></i>
                        </button>
                    </div>
                </div>
                <button class="top-btn" id="settingsBtn">
                    <i class="fas fa-cog"></i> 设置
                </button>
            </div>
        </div>
        
        <main class="main-content">
            <div class="logo-container">
                <div class="logo">
                    <span class="logo-text">Search</span>
                    <span class="logo-dot"></span>
                    <span class="logo-text">Tab</span>
                </div>
                <p class="tagline">快速访问您喜爱的搜索引擎</p>
            </div>
            
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" id="searchInput" placeholder="输入搜索关键词" autofocus>
                    <button class="search-btn" id="searchBtn">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                
                <div class="search-hint" id="searchHint">
                    按Enter键搜索
                </div>
            </div>
            
            <div class="quick-buttons" id="quickButtons">
                <button class="quick-btn" id="quickGoogle">
                    <i class="fab fa-google"></i>
                    <span>谷歌搜索</span>
                </button>
                <button class="quick-btn" id="quickBaidu">
                    <i class="fab fa-baidu"></i>
                    <span>百度搜索</span>
                </button>
                <button class="quick-btn" id="quickBing">
                    <i class="fab fa-microsoft"></i>
                    <span>必应搜索</span>
                </button>
            </div>
            
        </main>
        
		<footer class="footer">
			<div class="footer-info">
				<span id="currentDate"></span>
				<span id="currentTime"></span>
			</div>
			<div class="footer-ganzhi" id="ganzhiContainer">
				<span id="currentGanzhi"></span>
			</div>
		</footer>
    </div>
    
    <div class="settings-panel" id="settingsPanel">
        <div class="settings-header">
            <h3><i class="fas fa-sliders-h"></i> 设置</h3>
            <button class="close-settings" id="closeSettingsBtn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="settings-content">
            <div class="setting-item">
                <h4><i class="fas fa-search"></i> 默认搜索引擎</h4>
                <div class="radio-group">
                    <label>
                        <input type="radio" name="defaultEngine" value="google" checked>
                        <span>谷歌搜索</span>
                    </label>
                    <label>
                        <input type="radio" name="defaultEngine" value="baidu">
                        <span>百度搜索</span>
                    </label>
                    <label>
                        <input type="radio" name="defaultEngine" value="bing">
                        <span>必应搜索</span>
                    </label>
                </div>
            </div>
            
            <div class="setting-item">
                <h4><i class="fas fa-cogs"></i> 自定义搜索引擎</h4>
                <div id="customSearchForm">
                    <div style="margin-bottom: 15px;">
                        <input type="text" id="customSearchName" placeholder="搜索引擎名称" style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; background: rgba(255, 255, 255, 0.08); color: #fff;">
                        <input type="text" id="customSearchUrl" placeholder="搜索URL（使用{query}替换搜索词）" style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; background: rgba(255, 255, 255, 0.08); color: #fff;">
                        
                        <div style="margin-bottom: 10px; position: relative;">
                            <input type="text" id="customSearchIcon" placeholder="选择图标（点击下方图标选择）" style="width: 100%; padding: 10px; border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; background: rgba(255, 255, 255, 0.08); color: #fff; cursor: pointer;" readonly>
                            <div class="icon-selector-preview" style="position: absolute; right: 10px; top: 10px;">
                                <i id="iconPreview" class="fas fa-search" style="font-size: 18px; color: #8ab4f8;"></i>
                            </div>
                        </div>
                        
                        <div id="iconSelector" style="display: none; background: rgba(40, 45, 55, 0.95); border: 1px solid rgba(255, 255, 255, 0.15); border-radius: 8px; padding: 10px; margin-top: 8px; max-height: 220px; overflow-y: auto; box-shadow: 0 4px 20px rgba(0,0,0,0.3);">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <h5 style="margin: 0; font-size: 13px; color: #fff;">选择图标</h5>
                                <button id="closeIconSelector" style="background: none; border: none; cursor: pointer; color: rgba(255, 255, 255, 0.5); font-size: 14px; padding: 2px;">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            
                            <div id="iconCategories" style="display: flex; gap: 4px; margin-bottom: 10px; flex-wrap: wrap;">
                                <button class="icon-category-btn active" data-category="all" style="background: rgba(66, 133, 244, 0.3); color: #8ab4f8; border: 1px solid rgba(66, 133, 244, 0.3); padding: 4px 8px; border-radius: 6px; font-size: 11px; font-weight: 500; cursor: pointer;">全部</button>
                                <button class="icon-category-btn" data-category="search" style="background: rgba(255, 255, 255, 0.08); color: rgba(255, 255, 255, 0.7); padding: 4px 8px; border: none; border-radius: 6px; font-size: 11px; font-weight: 500; cursor: pointer;">搜索</button>
                                <button class="icon-category-btn" data-category="social" style="background: rgba(255, 255, 255, 0.08); color: rgba(255, 255, 255, 0.7); padding: 4px 8px; border: none; border-radius: 6px; font-size: 11px; font-weight: 500; cursor: pointer;">社交</button>
                                <button class="icon-category-btn" data-category="brand" style="background: rgba(255, 255, 255, 0.08); color: rgba(255, 255, 255, 0.7); padding: 4px 8px; border: none; border-radius: 6px; font-size: 11px; font-weight: 500; cursor: pointer;">品牌</button>
                                <button class="icon-category-btn" data-category="tools" style="background: rgba(255, 255, 255, 0.08); color: rgba(255, 255, 255, 0.7); padding: 4px 8px; border: none; border-radius: 6px; font-size: 11px; font-weight: 500; cursor: pointer;">工具</button>
                                <button class="icon-category-btn" data-category="media" style="background: rgba(255, 255, 255, 0.08); color: rgba(255, 255, 255, 0.7); padding: 4px 8px; border: none; border-radius: 6px; font-size: 11px; font-weight: 500; cursor: pointer;">媒体</button>
                            </div>
                            
                            <div id="iconGrid" style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 6px;"></div>
                            
                            <div style="margin-top: 10px; text-align: center; font-size: 11px; color: rgba(255, 255, 255, 0.5);">
                                <i class="fas fa-info-circle"></i> 点击图标选择
                            </div>
                        </div>
                        
                        <small style="color: rgba(255, 255, 255, 0.6); font-size: 12px; display: block; margin-top: 5px;">
                            或者手动输入FontAwesome图标类名（如：fab fa-github）
                        </small>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 8px; font-size: 14px; color: rgba(255, 255, 255, 0.8);">添加到哪一行？</label>
                        <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                            <select id="customSearchRow" style="padding: 8px; border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; background: rgba(255, 255, 255, 0.08); color: #fff; min-width: 120px;"></select>
                        </div>
                        <div id="existingRowsInfo" style="margin-top: 5px; font-size: 12px; color: rgba(255, 255, 255, 0.6);"></div>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 8px; font-size: 14px; color: rgba(255, 255, 255, 0.8);">对齐方式</label>
                        <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                            <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; color: rgba(255, 255, 255, 0.8); font-size: 13px;">
                                <input type="radio" name="customSearchAlign" value="center" checked style="accent-color: #4285f4;">
                                居中
                            </label>
                            <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; color: rgba(255, 255, 255, 0.8); font-size: 13px;">
                                <input type="radio" name="customSearchAlign" value="left" style="accent-color: #4285f4;">
                                左对齐
                            </label>
                            <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; color: rgba(255, 255, 255, 0.8); font-size: 13px;">
                                <input type="radio" name="customSearchAlign" value="right" style="accent-color: #4285f4;">
                                右对齐
                            </label>
                        </div>
                    </div>
                    
                    <button class="btn-secondary" id="addCustomSearchBtn" style="width: 100%;">
                        <i class="fas fa-plus"></i> 添加搜索引擎
                    </button>
                </div>
                
                <div style="margin-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1); padding-top: 15px;">
                    <h5 style="margin-bottom: 10px; font-weight: 500; color: #fff; font-size: 13px; display: flex; align-items: center; gap: 6px;">
                        <i class="fas fa-list"></i> 已添加的搜索引擎
                    </h5>
                    <div id="customSearchList" style="max-height: 200px; overflow-y: auto;"></div>
                    
                    <div style="display: flex; gap: 10px; margin-top: 15px;">
                        <button class="btn-secondary" id="exportSearchesBtn" style="flex: 1;">
                            <i class="fas fa-file-export"></i> 导出配置
                        </button>
                        <button class="btn-secondary" id="importSearchesBtn" style="flex: 1;">
                            <i class="fas fa-file-import"></i> 导入配置
                        </button>
                    </div>
                    <input type="file" id="importFileInput" accept=".json" style="display: none;">
                    
                    <button class="btn-secondary" id="clearCustomSearchesBtn" style="margin-top: 10px; width: 100%;">
                        <i class="fas fa-trash"></i> 清除所有自定义搜索引擎
                    </button>
                </div>
            </div>
            
            <div class="setting-item">
                <h4><i class="fas fa-image"></i> 壁纸设置</h4>
                <button class="btn-secondary" id="resetWallpaperBtn">
                    <i class="fas fa-undo"></i> 重置为默认壁纸
                </button>
            </div>
            
            <div class="setting-item">
                <h4><i class="fas fa-eye"></i> 显示选项</h4>
                <label class="checkbox-label">
                    <input type="checkbox" id="showTimeDate" checked>
                    <span>显示时间和日期</span>
                </label>
            </div>
            
            <div class="setting-item">
                <h4><i class="fas fa-database"></i> 数据管理</h4>
                <button class="btn-secondary" id="clearDataBtn">
                    <i class="fas fa-trash"></i> 清除所有设置
                </button>
            </div>
        </div>
    </div>
    
    <div class="bookmarks-panel" id="bookmarksPanel">
        <div class="bookmarks-header">
            <h3><i class="fas fa-bookmark"></i> 我的书签</h3>
            <button class="close-bookmarks" id="closeBookmarksBtn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="bookmarks-controls">
            <div class="bookmark-search">
                <i class="fas fa-search"></i>
                <input type="text" id="bookmarkSearchInput" placeholder="搜索书签..." autocomplete="off">
            </div>
            
            <div class="bookmark-filters">
                <button class="filter-btn active" data-filter="all">
                    <i class="fas fa-list"></i> 全部
                </button>
                <button class="filter-btn" data-filter="recent">
                    <i class="fas fa-clock"></i> 最近
                </button>
            </div>
        </div>
        
        <div class="bookmarks-content">
            <div class="bookmarks-loading" id="bookmarksLoading">
                <div class="loading-spinner"></div>
                <p>加载书签中...</p>
            </div>
            
            <div class="bookmarks-list" id="bookmarksList"></div>
        </div>
        
        <div class="bookmarks-toolbar">
            <div class="toolbar-info" id="selectionInfo">
                未选择
            </div>
            <div class="toolbar-actions">
                <button class="toolbar-btn add" id="addBookmarkBtn">
                    <i class="fas fa-plus"></i> 添加书签
                </button>
                <button class="toolbar-btn" id="newFolderBtn">
                    <i class="fas fa-folder-plus"></i> 新建分类
                </button>
                <button class="toolbar-btn delete" id="deleteSelectedBtn" disabled>
                    <i class="fas fa-trash"></i> 删除
                </button>
            </div>
        </div>
    </div>
    
    <div class="bookmarks-overlay" id="bookmarksOverlay"></div>
    
    <div class="new-folder-dialog" id="newFolderDialog">
        <div class="dialog-header">
            <h4><i class="fas fa-folder-plus"></i> 新建分类</h4>
            <button class="close-dialog" id="closeFolderDialog">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <input type="text" class="dialog-input" id="folderNameInput" placeholder="输入分类名称" autofocus>
        <div class="dialog-actions">
            <button class="dialog-btn cancel" id="cancelFolderBtn">取消</button>
            <button class="dialog-btn create" id="createFolderBtn">创建</button>
        </div>
    </div>
    
    <div class="new-bookmark-dialog" id="newBookmarkDialog">
        <div class="dialog-header">
            <h4><i class="fas fa-bookmark"></i> 添加书签</h4>
            <button class="close-dialog" id="closeBookmarkDialog">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <input type="text" class="dialog-input" id="bookmarkNameInput" placeholder="书签名称" autofocus>
        <input type="url" class="dialog-input" id="bookmarkUrlInput" placeholder="书签URL（以http://或https://开头）">
        <select class="dialog-input" id="bookmarkFolderSelect">
            <option value="1">书签栏</option>
            <option value="2">其他书签</option>
        </select>
        <div class="dialog-actions">
            <button class="dialog-btn cancel" id="cancelBookmarkBtn">取消</button>
            <button class="dialog-btn create" id="createBookmarkBtn">添加</button>
        </div>
    </div>
    
    <script src="newtab.js"></script>
	<script src="lunar.js"></script>
</body>
</html>